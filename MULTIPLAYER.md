# 多玩家功能演示

## 功能概述

这个 AI Chat Mod 现在完全支持多玩家环境，包括：

### 🔒 隐私保护
- 每个玩家的对话历史完全独立
- 其他玩家无法看到您与 AI 的对话
- AI 回复只发送给发起对话的玩家

### 🎭 个性化体验
- 每个玩家可以设置独特的 AI 人设
- 支持多种角色设定（建筑师、冒险家、工程师等）
- 人设设置互不干扰

### 👥 多人游戏支持
- 完美支持 Minecraft 服务器
- 支持局域网多人游戏
- 无冲突的并发对话

## 示例场景

### 场景1：建筑团队协作
**玩家A**：
```
/aichat personality 你是一个专业的建筑师，擅长设计大型建筑物
/aichat 帮我设计一个大教堂的结构
```

**玩家B**：
```
/aichat personality 你是一个室内设计师，专注于装饰细节
/aichat 教堂内部应该怎么装饰？
```

### 场景2：新手与老手
**新手玩家**：
```
/aichat personality 你是一个耐心的新手指导员
/aichat 我刚开始玩，应该先做什么？
```

**资深玩家**：
```
/aichat personality 你是一个红石工程专家
/aichat 设计一个自动农场的电路
```

## 管理员功能

### API Key 管理
- 只有管理员（OP）可以设置 API Key
- 确保 API 使用的安全性
- 统一管理成本控制

### 服务器配置
API Key 保存在服务器的 `config/ai_chat_config.json` 文件中：

```json
{
  "apiKey": "sk-your-api-key",
  "model": "deepseek-chat",
  "apiEndpoint": "https://api.deepseek.com/chat/completions"
}
```

## 性能优化

### 内存管理
- 自动清理断开连接玩家的数据
- 对话历史有合理的长度限制
- 高效的并发处理

### 网络优化
- 异步 API 调用，不阻塞游戏
- 智能的错误处理和重试机制
- 最小化网络延迟影响

## 故障排除

### 常见问题
1. **权限问题**：确保管理员有 OP 权限
2. **网络问题**：检查服务器网络连接
3. **API 限制**：注意 DeepSeek API 的调用限制

### 日志查看
服务器日志中会显示：
- API 调用状态
- 错误信息
- 玩家使用统计

## 最佳实践

### 服务器管理员
1. 定期备份配置文件
2. 监控 API 使用量
3. 设置合理的使用规则

### 玩家使用
1. 设置符合游戏情境的 AI 人设
2. 适当清理对话历史
3. 遵守服务器规则
